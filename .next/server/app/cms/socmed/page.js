(()=>{var e={};e.id=5610,e.ids=[5610],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},92048:e=>{"use strict";e.exports=require("fs")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},12876:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var a=t(49442),i=t(10042),s=t(48190),n=t.n(s),l=t(63289),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(r,o);let c=["",{children:["cms",{children:["socmed",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,59540)),"E:\\Works\\Projects\\Web\\pandawa\\src\\app\\cms\\socmed\\page.js"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,50934)),"E:\\Works\\Projects\\Web\\pandawa\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["E:\\Works\\Projects\\Web\\pandawa\\src\\app\\cms\\socmed\\page.js"],u={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/cms/socmed/page",pathname:"/cms/socmed",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},73474:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"00f955cf59d66fbbcc2be0d240705f294df0c810d7":()=>a.wi,"40003797b0ff6c1da270eb1e6caf7178a6f3269016":()=>a.er,"404dbd3f423c22c44d56c3b13b5359925a21b97074":()=>i.I,"6073ea05b75d414a0349eec8da4125c443f238db2e":()=>a.f3});var a=t(56196),i=t(68687)},19158:(e,r,t)=>{Promise.resolve().then(t.bind(t,53406)),Promise.resolve().then(t.bind(t,73068))},94457:(e,r,t)=>{Promise.resolve().then(t.bind(t,95767)),Promise.resolve().then(t.bind(t,24895))},24895:(e,r,t)=>{"use strict";t.d(r,{default:()=>v});var a=t(20149),i=t(63606),s=t(34231),n=t(62451),l=t(75469),o=t(74027),c=t(88346);function d({title:e="Social Media",initialData:r={},action:t}){let[s,d]=(0,i.useState)({}),[u,p]=(0,i.useState)({url:r?.url||"",imageUrl:r?.image?c._+r?.image:"",imageFile:{}}),[m,f]=(0,i.useState)(r?.image?c._+r?.image:null);return(0,a.jsx)(n.Z,{title:e,children:(0,a.jsxs)("form",{className:"grid w-full items-center gap-4",onSubmit:function(e){e.preventDefault();let a={},i=!0;if(Object.keys(u).forEach(e=>{"imageUrl"===e||("imageFile"===e?u.imageFile.name||""!=u.imageUrl||(a[e]=!0,i=!1):""!==u[e]||(a[e]=!0,i=!1))}),d(a),!i)return;let s={url:u.url,image:u.imageFile,imageUrl:r?.image};t&&t(s,r._id)},children:[(0,a.jsx)(o.Z,{id:"url",placeholder:"Input url text here..",value:u.url,isError:s?.url,label:"Url",onChange:function(e){let{id:r,value:t}=e.target;p({...u,[r]:t}),t&&""!==t.trim()?d({...s,[r]:!1}):d({...s,[r]:!0})}}),(0,a.jsx)(o.Z,{id:"image",placeholder:"Input image text here..",isError:s?.imageFile,label:"Image",type:"image",preview:m,onChange:function(e){let r=e.target.files[0];p({...u,imageFile:r}),r?(f(URL.createObjectURL(r)),d({...s,imageFile:!1})):d({...s,imageFile:!0})}}),(0,a.jsx)("div",{className:"text-end",children:(0,a.jsx)(l.z,{type:"submit",children:r?._id?"Update":"Add"})})]})})}var u=t(8412);let p=(0,u.createServerReference)("40003797b0ff6c1da270eb1e6caf7178a6f3269016",u.callServer,void 0,u.findSourceMapURL,"deleteSocialMedia"),m=(0,u.createServerReference)("6073ea05b75d414a0349eec8da4125c443f238db2e",u.callServer,void 0,u.findSourceMapURL,"createOrUpdateSocialMedia");var f=t(4619),g=t(73310),b=t(85144);function v({data:e}){let[r,t]=(0,i.useState)(!1),[n,l]=(0,i.useState)({}),[o,u]=(0,i.useState)(!1),v=(0,f.useRouter)(),{toast:x}=(0,b.pm)();return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(g.Z,{loading:r}),(0,a.jsx)(s.Z,{title:"Social Media",dialogOpen:o,setDialogOpen:u,setLoading:t,setFormData:l,data:e,initialColumns:[{accessorKey:"url",header:"url"},{accessorKey:"image",header:"Image",cell:({row:e})=>(0,a.jsx)("img",{src:c._+e.getValue("image"),alt:e.getValue("image"),className:"rounded-lg w-full lg:w-[8rem] cursor-pointer mt-[0.5rem]"})}],deleteAction:p,form:(0,a.jsx)(d,{initialData:n,action:async(e,r)=>{t(!0);let a=await m(e,r);t(!1),u(!1),x({variant:a?"primary":"destructive",description:a?"Success":"Error"}),a&&v.refresh()}})})]})}},59540:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o,dynamic:()=>l});var a=t(47705),i=t(56196),s=t(53406),n=t(73068);let l="force-dynamic";async function o(){let e=await (0,i.wi)();return(0,a.jsx)(s.default,{children:(0,a.jsx)("div",{className:"lg:px-[2.5rem] p-[1rem] w-full flex flex-col gap-y-[1rem]",children:(0,a.jsx)(n.default,{data:e})})})}},73068:(e,r,t)=>{"use strict";t.d(r,{default:()=>a});let a=(0,t(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\Works\\\\Projects\\\\Web\\\\pandawa\\\\src\\\\components\\\\layouts\\\\cms\\\\table\\\\DatatableSocialMedia.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\Works\\Projects\\Web\\pandawa\\src\\components\\layouts\\cms\\table\\DatatableSocialMedia.js","default")},56196:(e,r,t)=>{"use strict";t.d(r,{f3:()=>c,er:()=>d,wi:()=>u});var a=t(64443);t(98356);var i=t(68687),s=t(11185),n=t.n(s);let l=new(n()).Schema({url:{type:String,required:!1,default:""},image:{type:String,required:!1,default:""},createdAt:{type:Date,default:Date.now}}),o=n().models.SocialMedia||n().model("SocialMedia",l);async function c(e,r){try{let t=e.image.name?await (0,i.I)(e.image):e.imageUrl,a={...e,image:t};return r?await o.findByIdAndUpdate(r,a,{new:!0}):await o.create(a),!0}catch(e){return!1}}async function d(e){try{return await o.deleteOne({_id:e}),!0}catch(e){return!1}}async function u(){return(await o.find().sort({createdAt:1}).select("_id -__v").lean()).map(e=>({...e,_id:e._id.toString()}))}(0,t(35413).h)([c,d,u]),(0,a.j)(c,"6073ea05b75d414a0349eec8da4125c443f238db2e",null),(0,a.j)(d,"40003797b0ff6c1da270eb1e6caf7178a6f3269016",null),(0,a.j)(u,"00f955cf59d66fbbcc2be0d240705f294df0c810d7",null)},68687:(e,r,t)=>{"use strict";t.d(r,{I:()=>o});var a=t(64443);t(98356);var i=t(92048),s=t.n(i),n=t(55315),l=t.n(n);async function o(e){let r=l().join(process.cwd(),"public/uploads");if(s().existsSync(r)||s().mkdirSync(r,{recursive:!0}),!e)throw Error("No file provided");let t=e.name.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9._-]/g,""),a=new Date().toISOString().replace(/[-:.]/g,""),i=`${a}_${t}`,n=l().join(r,i),o=Buffer.from(await e.arrayBuffer());return s().writeFileSync(n,o),`/uploads/${i}`}(0,t(35413).h)([o]),(0,a.j)(o,"404dbd3f423c22c44d56c3b13b5359925a21b97074",null)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[8492,1146,7099,3832,3987,241,8519,609,1005,2314,838,8506,5767,4856],()=>t(12876));module.exports=a})();