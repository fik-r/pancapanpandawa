(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8960],{81453:(e,t,i)=>{Promise.resolve().then(i.bind(i,66722)),Promise.resolve().then(i.bind(i,98497))},89030:(e,t,i)=>{"use strict";let l;i.d(t,{c:()=>j,$:()=>b});var r=i(57437),a=i(2265),n=i(1916),s=i(12200),d=i(4761),o=i(87138),c=i(87592),u=i(58214),m=i(38364),p=i(66046),g=i(62871);let f={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},h=new Uint8Array(16),v=[];for(let e=0;e<256;++e)v.push((e+256).toString(16).slice(1));let x=function(e,t,i){if(f.randomUUID&&!t&&!e)return f.randomUUID();let r=(e=e||{}).random||(e.rng||function(){if(!l){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");l=crypto.getRandomValues.bind(crypto)}return l(h)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=r[e];return t}return function(e,t=0){return(v[e[t+0]]+v[e[t+1]]+v[e[t+2]]+v[e[t+3]]+"-"+v[e[t+4]]+v[e[t+5]]+"-"+v[e[t+6]]+v[e[t+7]]+"-"+v[e[t+8]]+v[e[t+9]]+"-"+v[e[t+10]]+v[e[t+11]]+v[e[t+12]]+v[e[t+13]]+v[e[t+14]]+v[e[t+15]]).toLowerCase()}(r)};function b(e){let{title:t="Services",initialData:i={},action:l}=e,[u,m]=(0,a.useState)({}),[p,g]=(0,a.useState)({title:(null==i?void 0:i.title)||"",description:(null==i?void 0:i.description)||""});function f(e){let{id:t,value:i}=e.target;g({...p,[t]:i}),i&&""!==i.trim()?m({...u,[t]:!1}):m({...u,[t]:!0})}return(0,r.jsx)(n.Z,{title:t,children:(0,r.jsxs)("form",{className:"grid w-full items-center gap-4",onSubmit:function(e){e.preventDefault();let t={},i=!0;Object.keys(p).forEach(e=>{""===p[e]&&(t[e]=!0,i=!1)}),m(t),i&&l&&l(p)},children:[(0,r.jsx)(d.Z,{id:"title",placeholder:"Input title text here..",value:p.title,isError:null==u?void 0:u.title,label:"Title",onChange:f}),(0,r.jsx)(d.Z,{id:"description",placeholder:"Input description text here..",value:p.description,isError:null==u?void 0:u.description,label:"Description",onChange:f,type:"textarea"}),(0,r.jsx)(o.default,{href:"/cms/services",children:(0,r.jsxs)(s.z,{className:"rounded-md p-text-body-sm font-semibold",children:["Go to Services",(0,r.jsx)(c.Z,{className:"h-4 w-4"})]})}),(0,r.jsx)("div",{className:"text-end",children:(0,r.jsx)(s.z,{type:"submit",children:"Update"})})]})})}function j(e){let{title:t="Services",initialData:i={},action:l}=e,[o,c]=(0,a.useState)({}),[f,h]=(0,a.useState)({title:(null==i?void 0:i.title)||"",description:(null==i?void 0:i.description)||"",details:(null==i?void 0:i.details)||[],imageUrl:(null==i?void 0:i.image)?u._+(null==i?void 0:i.image):"",imageFile:{}}),[v,b]=(0,a.useState)((null==i?void 0:i.image)?u._+(null==i?void 0:i.image):null);function j(e){let{id:t,value:i}=e.target;h({...f,[t]:i}),i&&""!==i.trim()?c({...o,[t]:!1}):c({...o,[t]:!0})}function y(e,t,i){let l=[...f.details];l[e][t]=i,h({...f,details:l}),""!==i.trim()?c({...o,["details-".concat(e)]:!1}):c({...o,["details-".concat(e)]:!0})}return(0,r.jsx)(n.Z,{title:t,children:(0,r.jsxs)("form",{className:"grid w-full items-center gap-4",onSubmit:function(e){e.preventDefault();let t={},r=!0;if(Object.keys(f).forEach(e=>{"imageUrl"===e||("imageFile"===e?f.imageFile.name||""!=f.imageUrl||(t[e]=!0,r=!1):""!==f[e]||(t[e]=!0,r=!1))}),f.details.forEach((e,i)=>{e.title&&e.html||(t["details-".concat(i)]=!0,r=!1)}),c(t),!r)return;let a=f.details.map(e=>({...e,_id:e._id||x()})),n={title:f.title,description:f.description,image:f.imageFile,imageUrl:null==i?void 0:i.image,details:a};l&&l(n,i._id)},children:[(0,r.jsx)(d.Z,{id:"title",placeholder:"Input title text here..",value:f.title,isError:null==o?void 0:o.title,label:"Title",onChange:j}),(0,r.jsx)(d.Z,{id:"description",placeholder:"Input description text here..",value:f.description,isError:null==o?void 0:o.description,label:"Description",onChange:j,type:"textarea"}),(0,r.jsx)(d.Z,{id:"image",placeholder:"Input image text here..",isError:null==o?void 0:o.imageFile,label:"Image",type:"image",preview:v,onChange:function(e){let t=e.target.files[0];h({...f,imageFile:t}),t?(b(URL.createObjectURL(t)),c({...o,imageFile:!1})):c({...o,imageFile:!0})}}),(0,r.jsx)(m._,{children:"Detail"}),f.details.map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col gap-2 border p-2 rounded",children:[(0,r.jsx)(p.Z,{placeholder:"Detail title",value:e.title,onChange:e=>y(t,"title",e.target.value)}),(0,r.jsx)(g.Z,{value:e.html,onModelChange:e=>y(t,"html",e)}),o["details-".concat(t)]&&(0,r.jsx)(m._,{className:"text-sm text-red-500 px-[0.25rem]",children:"Detail title and content can't be empty!"}),(0,r.jsx)(s.z,{type:"button",className:"bg-red-500 hover:bg-red-600 mt-2",onClick:()=>(function(e){let t=f.details.filter((t,i)=>i!==e);h({...f,details:t})})(t),children:"Remove Detail"})]},t)),(0,r.jsx)("div",{className:"text-start",children:(0,r.jsx)(s.z,{type:"button",className:"bg-green-500 hover:bg-green-600",onClick:function(){h({...f,details:[...f.details,{title:"",html:""}]})},children:"Add Detail"})}),(0,r.jsx)("div",{className:"text-end",children:(0,r.jsx)(s.z,{type:"submit",children:(null==i?void 0:i._id)?"Update":"Add"})})]})})}},98497:(e,t,i)=>{"use strict";i.d(t,{default:()=>g});var l=i(57437),r=i(2265),a=i(52632),n=i(89030),s=i(58064);let d=(0,s.createServerReference)("40cfb08fa71a40c8d4e8d73468b83b3f287adbed45",s.callServer,void 0,s.findSourceMapURL,"deleteService"),o=(0,s.createServerReference)("60583c1cedeccf59c85682ca2baaf3756676999a17",s.callServer,void 0,s.findSourceMapURL,"createOrUpdateService");var c=i(58214),u=i(16463),m=i(75649),p=i(75242);function g(e){let{data:t}=e,[i,s]=(0,r.useState)(!1),[g,f]=(0,r.useState)({}),[h,v]=(0,r.useState)(!1),x=(0,u.useRouter)(),{toast:b}=(0,p.pm)();return(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(m.Z,{loading:i}),(0,l.jsx)(a.Z,{title:"Services",dialogOpen:h,setDialogOpen:v,setLoading:s,setFormData:f,data:t,initialColumns:[{accessorKey:"title",header:"Title"},{accessorKey:"image",header:"Image",cell:e=>{let{row:t}=e;return(0,l.jsx)("img",{src:c._+t.getValue("image"),alt:t.getValue("image"),className:"rounded-lg w-full lg:w-[8rem] cursor-pointer mt-[0.5rem]"})}}],deleteAction:d,form:(0,l.jsx)(n.c,{initialData:g,action:async(e,t)=>{s(!0);let i=await o(e,t);s(!1),v(!1),b({variant:i?"primary":"destructive",description:i?"Success":"Error"}),i&&x.refresh()}})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2420,3627,4476,9373,8391,8291,8457,2066,5586,6301,6722,2632,7130,6215,1744],()=>t(81453)),_N_E=e.O()}]);